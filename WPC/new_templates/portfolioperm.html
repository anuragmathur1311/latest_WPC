{%if me%}
    {%extends "index_user.html"%}
{%else%}
    {%extends "index.html"%}
{%endif%}

{%block title%}
{{user.name}} | WPC
{%endblock%}

{%block styleSheets%}
<!-- Bootstrap core CSS -->
<link href="/css/bootstrap.css" rel="stylesheet">
<!-- Add custom CSS here -->
<link href="/css/my_studio.css" rel="stylesheet">
<link href="/css/font.css" rel="stylesheet">
<link href="/css/camera_lenses.css" rel="stylesheet">

{%endblock%}

{%block carousel%}
{%endblock%}

{%block signup_links%}  
{%endblock%}

{%block pageContent%}
    <!-- Full Page Image Header Area -->
    
    <div id="top" class="header" style="background: url({{get_serving_url(portfolio.cover_photo1)}}) no-repeat center center fixed;background-size: cover;z-index:1;">
      <div class="transbox_top_right">
        {%if me == user%}
        <a data-toggle="modal" data-target=".cover_image_1" title="Change Cover Image 1" style="color:white;"><i style="font-size:20px;" class="fa fa-edit"></i></a>
        {%endif%}
      </div>
      <div class="transbox_bottom_right">
        <div class="col-md-12" style="margin:0px;">
          <div class="col-md-2" style="margin-top:-50px;height:50px;z-index:3;left:5px;">
            <div class="profile-img">
              <img src="{{user.avatar_url}}" alt="Profile Image" style="margin-left:-25px;margin-top:0px;" width="200px">
            </div>
          </div>
          <div class="col-md-2" style="margin:-5px;left:12%;">
            <h2><a class="" href="/{{user.key.id()}}" style="color:white;font-size:20px;padding_bottom:2px;" ><em>  {{user.name}} </em></a></h2>
            <img src="/fonts/Flags/{{user.country}}.png" alt="country" width="30px"/>
          </div>
          <div class="col-md-4" style="margin:30px;">
            {%if me == user%}
               <a href="/{{user.key.id()}}/about" style="color:white;"><button type="button" title="About {{user.name}}" style="margin:5px;" class="btn btn-info btn-sm photographer_options"><i class="fa fa-key"></i></button></a>
               <button type="button" title="Share {{portfolio.name}} portfolio" style="margin:5px;" class="btn btn-info btn-sm photographer_options" data-toggle="modal" data-target=".share_modal"><i class="fa fa-share"></i></button>
               <button type="button" title="Delete {{portfolio.name}} portfolio" style="margin:5px;" class="btn btn-info btn-sm photographer_options" data-toggle="modal" data-target=".delete_modal"><span class="glyphicon glyphicon-trash" style="color:white;"></span></button>
            {%else%} 
              <a href="/{{user.key.id()}}/about" style="color:white;"><button type="button" title="About {{user.name}}" style="margin:5px;" class="btn btn-info btn-sm photographer_options"><i class="fa fa-key"></i></button></a>
              <button type="button" title="Send Private Message to {{user.name}}" style="margin:5px;" class="btn btn-info btn-sm photographer_options" data-toggle="modal" data-target=".personal_message"><i class="fa fa-envelope"></i></button>
              <button type="button" title="Share {{user.name}} portfolio" style="margin:5px;" class="btn btn-info btn-sm photographer_options" data-toggle="modal" data-target=".share_modal"><i class="fa fa-share"></i></button>
              <button type="button" title="Give Award to {{user.name}}" style="margin:5px;" class="btn btn-info btn-sm photographer_options" data-toggle="modal" data-target=".photography_awards"><i class="fa fa-trophy"></i></button>
            {%endif%}
           </div>
          <div class="col-md-5" style="margin:0px;">
            <div class="col-md-2 col-sm-2 col-xs-2" style="margin:0px;">
              <a data-toggle="modal" data-target=".followers"><h2 style="color:white;">{{len(user.followers)}}</h2>
              <h4 style="color:yellow;">Followers</h4></a>
            </div>
            <div class="col-md-2 col-sm-2 col-xs-2" style="margin:0px;">
              <a data-toggle="modal" data-target=".following"><h2 style="color:white;">{{len(user.following)}}</h2>
              <h4 style="color:yellow;">Following</h4></a>
            </div>
            <div class="col-md-2" style="margin:0px;">
              <h2 style="color:white;">{{len(portfolio.photos)}}</h2>
              <h4 style="color:yellow;">Photos</h4>
            </div>
            <div class="col-md-2 col-sm-2 col-xs-2" style="margin:0px;">
              <a data-toggle="modal" data-target=".awards"><h2 style="color:white;">{{len(user.awards)}}</h2>
              <h4 style="color:yellow;">Awards</h4></a>
            </div>
            <div class="col-md-2" style="margin:15px;">
                {%if user.watermark%}
                {%if user.website%}
                  <a href="{{user.website}}"><img src="{{user.watermark_url}}" title="{{user.name}}'s personal website" alt="Profile Image" width="60px"><br></a>
                {%else%}
                  <a href=""><img src="{{user.watermark_url}}" title="{{user.name}}'s personal website" alt="Profile Image" width="60px"><br></a>
                {%endif%}  
              {%else%}
                {%if user.website%}
                  <a href="{{user.website}}"><h4>{{user.name}} Website</h4></a>
                {%else%}
                  <a href=""><h4>{{user.name}} Website</h4></a>
                {%endif%}
              {%endif%}
            </div>
          </div>        
        </div>
      </div>
    </div>
<div id="fb-root"></div>
<script>
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.0";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Place this tag in your head or just before your close body tag. -->
<script src="https://apis.google.com/js/platform.js" async defer></script>

<script type="text/javascript">
(function(d){
    var f = d.getElementsByTagName('SCRIPT')[0], p = d.createElement('SCRIPT');
    p.type = 'text/javascript';
    p.async = true;
    p.src = '//assets.pinterest.com/js/pinit.js';
    f.parentNode.insertBefore(p, f);
}(document));
</script>
    <div class="modal fade share_modal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title">Share Profile</h4>
          </div>
          <form role="form" method="post">
            <input type="hidden" name="formType" value="share_links">
            <br>
                <h4>Link to Profile</h4>
                <h4 style="color:blue;"><em>http://www.worldphotographersclub.com/{{user.key.id()}}</em></h4><br>
                <p>or</p>
              <ul class="list-inline">
                <li><a class="fb-share-button" data-href="https://developers.facebook.com/docs/plugins/" data-layout="button_count" data-width="100"></a></li>
                <li><a href="https://twitter.com/share" class="twitter-share-button" data-size="large">Tweet</a></li>
                <li><div class="g-plus" data-action="share" data-height="30"></div></li>
                 <li><a href="http://www.pinterest.com/pin/create/button/
                    ?url=http%3A%2F%2Fwww.flickr.com%2Fphotos%2Fkentbrew%2F6851755809%2F
                    &media=http%3A%2F%2Ffarm8.staticflickr.com%2F7027%2F6851755809_df5b2051c9_z.jpg
                    &description=Next%20stop%3A%20Pinterest"
                    data-pin-do="buttonPin"
                    data-pin-config="above">
                    <img src="//assets.pinterest.com/images/pidgets/pin_it_button.png" />
                </a></li>
              </ul>
          </form>
        </div>
      </div>
    </div>


<div class="modal fade photography_awards" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title">Give Photography Awards</h4>
          </div>
          <form role="form" method="post">
            <input type="hidden" name="actionType" value="photography_awards">
            <input type="hidden" id="userid" name="user" value="{{user.key.id()}}">
            <div class="col-lg-2 col-md-2 text-center">
                <div class="service-item change_color">
                    <div onclick="change_color_n_add_input_awards(this, 'Simply_Awesome')"><i class="service-icon fa fa-trophy"></i>
                    <h4>Simply Awesome!!!</h4></div>
                    <div id="Simply_Awesome"></div>
                </div>
            </div>
            <div class="col-lg-2 col-md-2 text-center">
                <div class="service-item change_color" >
                    <div onclick="change_color_n_add_input_awards(this, 'Jaw_Dropping')"><i class="service-icon fa fa-trophy"></i>
                    <h4>Jaw Dropping!!!</h4></div>
                    <div id="Jaw_Dropping"></div>
                </div>
            </div>
            <div class="col-lg-2 col-md-2 text-center">
                <div class="service-item change_color">
                    <div onclick="change_color_n_add_input_awards(this, 'World_Class')"><i class="service-icon fa fa-trophy"></i>
                    <h4>World Class</h4></div>
                    <div id="World_Class"></div>
                </div>
            </div>
            <div class="col-lg-2 col-md-2 text-center">
                <div class="service-item change_color">
                    <div onclick="change_color_n_add_input_awards(this, 'Beautiful_Composition')"><i class="service-icon fa fa-trophy"></i>
                    <h4>Beautiful Composition</h4></div>
                    <div id="Beautiful_Composition"></div>
                </div>
            </div>
            <div class="col-lg-2 col-md-2 text-center">
                <div class="service-item change_color">
                    <div onclick="change_color_n_add_input_awards(this, 'Piece_of_Art')"><i class="service-icon fa fa-trophy"></i>
                    <h4>Piece of Art</h4></div>
                    <div id="Piece_of_Art"></div>
                </div>
            </div>
            <div class="col-lg-2 col-md-2 text-center">
                <div class="service-item change_color">
                    <div onclick="change_color_n_add_input_awards(this, 'Truly_Inspirational')"><i class="service-icon fa fa-trophy"></i>
                    <h4>Truly Inspirational</h4></div>
                    <div id="Truly_Inspirational"></div>
                </div>
            </div>
          <div class="modal-footer">
          </div>
          <div class="photography_awards_inputs">
          </div>
          <button class="btn btn-xs btn-success padding-bottom" type="submit">Give Awards</button>
        </form>
        </div>
      </div>
    </div>

    <div class="modal fade awards" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title">{{user.name}} Awards</h4>
          </div>
          {% set Simply_Awesome_num = 0 %}
          {% set Jaw_Dropping_num = 0 %}
          {% set World_Class_num = 0 %}
          {% set Beautiful_Composition_num = 0 %}
          {% set Piece_of_Art_num = 0 %}
          {% set Truly_Inspirational_num = 0 %}

          {%for a in user.awards%}
                {%if a == 'Simply_Awesome'%}
                  {% set Simply_Awesome_num =  Simply_Awesome_num + 1%}
                {%elif a == 'Jaw_Dropping'%}
                  {% set Jaw_Dropping_num =  Jaw_Dropping_num + 1%}
                {%elif a == 'World_Class'%}
                  {% set World_Class_num =  World_Class_num + 1%}
                {%elif a == 'Beautiful_Composition'%}
                  {% set Beautiful_Composition_num =  Beautiful_Composition_num + 1%}
                {%elif a == 'Piece_of_Art'%}
                  {% set Piece_of_Art_num =  Piece_of_Art_num + 1%}
                {%elif a == 'Truly_Inspirational'%}
                  {% set Truly_Inspirational_num =  Truly_Inspirational_num + 1%}
                {%endif%}
             {%if loop.last%}
                {%if Simply_Awesome_num > 0%}
                 <div class="col-md-2 text-center">
                      <div><i  style="color:gold;" class="fa fa-trophy fa-3x"><span class="badge pull-right">{{Simply_Awesome_num}}</span></i>
                      <h5>Simply Awesome</h5></div>
                 </div>
                 {%endif%}
                 {%if Jaw_Dropping_num > 0%}
                 <div class="col-md-2 text-center">
                      <div><i  style="color:gold;" class="fa fa-trophy fa-3x"><span class="badge pull-right">{{Jaw_Dropping_num}}</span></i>
                      <h5>Jaw Dropping</h5></div>
                 </div>
                 {%endif%}
                 {%if World_Class_num > 0%}
                 <div class="col-md-2 text-center">
                      <div><i  style="color:gold;" class="fa fa-trophy fa-3x"><span class="badge pull-right">{{World_Class_num}}</span></i>
                      <h5>World Class</h5></div>
                 </div>
                 {%endif%}
                 {%if Beautiful_Composition_num > 0%}
                 <div class="col-md-2 text-center">
                      <div><i  style="color:gold;" class="fa fa-trophy fa-3x"><span class="badge pull-right">{{Beautiful_Composition_num}}</span></i>
                      <h5>Beautiful Composition</h5></div>
                 </div>
                 {%endif%}
                 {%if Piece_of_Art_num > 0%}
                 <div class="col-md-2 text-center">
                      <div><i  style="color:gold;" class="fa fa-trophy fa-3x"><span class="badge pull-right">{{Piece_of_Art_num}}</span></i>
                      <h5>Piece of Art</h5></div>
                 </div>
                 {%endif%}
                 {%if Truly_Inspirational_num > 0%}
                 <div class="col-md-2 text-center">
                      <div><i  style="color:gold;" class="fa fa-trophy fa-3x"><span class="badge pull-right">{{Truly_Inspirational_num}}</span></i>
                      <h5>Truly Inspirational</h5></div>
                 </div>
                 {%endif%}
              {%endif%}
          {%endfor%}
          <div class="modal-footer">
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade delete_modal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-sm">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title">Are you sure you want to delete {{portfolio.name}} portfolio?</h4>
          </div>
          <form role="form" method="post">
              <div class="modal-footer">
                <input type="hidden" id="" name="actionType" value="delete">
               <button class="btn btn-primary btn-sm" type="submit" title="Delete Portfolio">Yes</button>
              </div>
          </form>
        </div>
      </div>
    </div>

        <div class="modal fade cover_image_1" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
      <form role="form" method="post" action="{{uploadUrl}}" enctype="multipart/form-data">
      <div class="modal-dialog modal-mlg">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title">Add Cover Image 1</h4>
          </div>
                <input type="hidden" id="cover1_actionType" name="actionType" value="">
                <div class="col-sm-4 col-sm-offset-4">
                  <p>Select Cover Image 1</p>
                  <div class="column fileupload-buttonbar">
                      <span class="btn btn-xs btn-info fileinput-button" data-toggle="modal" data-target="#select_cover_photo_1">
                        <i class="glyphicon glyphicon-plus"></i>
                        <span style="color:white;">Select Image</span>
                        <input type="hidden" id="cover1Key" name="cover1Key" value="">
                      </span>
                       <div class="container row" id="thumb_img1"></div>
                       <div id="cover_image_1_input"></div>
                  </div>
                </div>     
          <div class="modal-footer">
          </div>
          <hr>
            <button class="btn btn-xs btn-success padding-bottom" type="submit">Update Portfolio</button>
        </div>
      </div>
      </form>
    </div>
  <div class="modal fade bs-example-modal-lg" id="select_cover_photo_1" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
          <h4 class="modal-title">Select and Add Photo</h4>
        </div>
              <div class="col-lg-12 col-sm-12 col-xs-12" id="photo_select" align="center">
                <div class="thumb_imgs">
                      {%for p in portfolio.photos%}
                        <a onclick="select_cover1('{{get_serving_url(p.get().blobKey)}}');" href="javascript:void(0);"><img src="{{get_serving_url(p.get().blobKey)}}" height="100px" alt="photo"></a>
                      {%endfor%}
                </div><br>
                <div id="main_img2" class=""></div>
              </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-xs btn-primary close" data-dismiss="modal">Select and Close</button>
        </div>
      </div>
    </div>
  </div>

<script type="text/javascript">
function select_cover1(img_src) {
    document.getElementById("main_img2").innerHTML = "<img alt='' src='"+img_src+"' height='100%' class='img_display'/>";
    document.getElementById("thumb_img1").innerHTML = "<br><div class='col-xs-2'><img alt='' src='"+img_src+"' height='100px'/></div>";
    document.getElementById("cover1Key").value = img_src;
    document.getElementById("cover1_actionType").value = "select1";
  }
</script>
    <!-- Callout -->
    <div class="callout" id="callout" style="background: url({{get_serving_url(portfolio.cover_photo2)}}) no-repeat center center fixed;background-size: cover;z-index:2;">
        <div class="vert-text">
            <div class="row col-md-12" style="margin:0px;">
              <div class="col-md-1">
              </div>
                <div class="col-md-4 col-md-offset-3 text-center">
                    <h3>Photography Interests</h3>
                    <hr>
                </div>
                <div class="col-md-4" style="margin:0px;text-align:right;right:10px;">
                  {%if me == user%}
                  <a data-toggle="modal" title="Change Cover Image 2" data-target=".cover_image_2"><i style="font-size:20px;color:white;" class="fa fa-edit"></i></a>
                  {%endif%}
                </div>
            </div>
            <div class="row text-center">
              {%for pi in user.photography_interests%}
                <div class="col-lg-2 col-md-2 text-center">
                    <div class="service-item">
                        <i class="service-icon fa fa-{{pi}}"></i>
                        <h4>{{pi}}</h4>
                    </div>
                </div>
              {%endfor%}
            </div>
        </div>
    </div>
    <!-- /Callout -->
    <div class="modal fade cover_image_2" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
      <form role="form" method="post">
      <div class="modal-dialog modal-mlg">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title">Add Cover Image 2</h4>
          </div>
                <input type="hidden" id="cover2_actionType" name="actionType" value="">
                <div class="col-sm-4 col-sm-offset-4">
                  <p>Select Cover Image 2</p>
                  <div class="column fileupload-buttonbar">
                      <span class="btn btn-xs btn-info fileinput-button" data-toggle="modal" data-target="#select_cover_photo_2">
                        <i class="glyphicon glyphicon-plus"></i>
                        <span style="color:white;">Select Image</span>
                        <input type="hidden" id="cover2Key" name="cover2Key" value="">
                      </span>
                       <div class="container row" id="thumb_img2"></div>
                       <div id="cover_image_2_input"></div>
                  </div>
                </div>
          <div class="modal-footer">
          </div>
          <hr>
            <button class="btn btn-xs btn-success padding-bottom" type="submit">Update Portfolio</button>
        </div>
      </div>
      </form>
    </div>

  <div class="modal fade bs-example-modal-lg" id="select_cover_photo_2" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
          <h4 class="modal-title">Select and Add Photo</h4>
        </div>
              <div class="col-lg-12 col-sm-12 col-xs-12" id="photo_select" align="center">
                <div class="thumb_imgs">
                      {%for p in portfolio.photos%}
                        <a onclick="select_cover2('{{get_serving_url(p.get().blobKey)}}');" href="javascript:void(0);"><img src="{{get_serving_url(p.get().blobKey)}}" height="100px" alt="photo"></a>
                      {%endfor%}
                </div><br>
                <div id="main_img3" class=""></div>
              </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-xs btn-primary close" data-dismiss="modal">Select and Close</button>
        </div>
      </div>
    </div>
  </div>

<script type="text/javascript">
function select_cover2(img_src) {
    document.getElementById("main_img3").innerHTML = "<img alt='' src='"+img_src+"' height='100%' class='img_display'/>";
    document.getElementById("thumb_img2").innerHTML = "<br><div class='col-xs-2'><img alt='' src='"+img_src+"' height='100px'/></div>";
    document.getElementById("cover2Key").value = img_src;
    document.getElementById("cover2_actionType").value = "select2";
} 
</script>
    <br>
    <h2>{{portfolio.name}}</h2>{%if me == user%}
     <form method="post">
        <input type="hidden" name="formType" value="portfolio">
        <input type="hidden" id="userid" name="user" value="{{user.key.id()}}">
        <input type="hidden" name="actionType" value="portfolio_edit">
        <input type="hidden" name="portfolioKey" value="{{portfolio.key.urlsafe()}}">
        <button type="submit" title="Edit {{portfolio.name}} portfolio" style="margin:5px;" class="btn btn-info btn-sm photographer_options"><span class="glyphicon glyphicon-edit" style="color:white;"> Edit</span></button>
      </form>
            <a href="" data-toggle="modal" data-target="#add_image">Add Photos</a>
            {%endif%}<hr>
  <div class="row" style="margin-top:20px;z-index:1;"> 
    <div class="container">
      <div id="my_ideas">
        {%for p in portfolio.photos%}
        {% else %}
          <div>
            <h2>No photos in {{portfolio.name}} Portfolio </h2>
            {%if me == user%}
            <a href="/newphoto">Add Photos</a>
            {%endif%}
          </div>
            {%set no_photos = 1%}
        {% endfor %}
        {%if no_photos != 1%}
      <div class="row col-md-3 col-sm-4 col-xs-12" style="margin:0px;">
        {%for p in portfolio.photos%}
        {%if loop.index % 4 == 1%}
                <a href="/photo/{{p.get().key.urlsafe()}}"><img src="{{get_serving_url(p.get().blobKey,size=100)}}" width="98%" id="temp1" alt="photo"></a>
          <br>
          
              <div class="button-container post-action padding_top padding_bottom">
                  <p>{{p.get().likes}} <i class="fa fa-thumbs-o-up fa-1x"></i> | {{p.get().viewed}} <i class="fa fa-eye fa-1x"></i></p>
                 {%if me == user%}
                  <form method="post">
                    <input type="hidden" name="actionType" value="edit">
                    <input type="hidden" name="photoKey" value="{{p.get().key.urlsafe()}}">
                    <button class="btn btn-primary btn-xs" type="submit" title="Edit Image" value="Edit"><span class="glyphicon glyphicon-edit" style="color:white;"></span></button>
                  </form>
                  <form method="post">
                    <input type="hidden" name="actionType" value="delete_photo">
                    <input type="hidden" name="photoKey" value="{{p.get().key.urlsafe()}}">
                    <button class="btn btn-primary btn-xs" type="submit" title="Delete Image" value="Delete"><span class="glyphicon glyphicon-trash" style="color:white;"></span></button>
                  </form>
                  <form method="post">
                    <input type="hidden" name="actionType" value="download">
                    <input type="hidden" name="photoKey" value="{{p.get().key.urlsafe()}}">
                    <button class="btn btn-primary btn-xs" type="submit"title="Download Image"  value="Delete"><i class="fa fa-download fa-1x"></i></button>
                  </form>
                  {%else%}
                  <button class="btn btn-info btn-xs" id="after_photo_list_like_{{loop.index}}" type="submit" title="Like This Image"><a onclick="photo_list_like_button('{{p.get().key.urlsafe()}}', 'after_photo_list_like_{{loop.index}}');" href="javascript:void(0);"><i style="color:white;" class="fa fa-thumbs-up fa-1x"></i></a></button>
                  <button class="btn btn-primary btn-xs" id="after_photo_list_add_{{loop.index}}" type="submit" title="Like This Image"><a onclick="photo_list_add_button('{{p.get().key.urlsafe()}}', 'after_photo_list_add_{{loop.index}}');" href="javascript:void(0);"><i style="color:white;" class="fa fa-plus fa-1x"></i></a></button>
                  {%endif%}
                </div>
                <hr>
        {%endif%}
        {% endfor %}
        </div>
        <div class="row col-md-3 col-sm-4 col-xs-12" style="margin:0px;">
        {%for p in portfolio.photos%}
        {%if loop.index % 4 == 2%}
                <a href="/photo/{{p.get().key.urlsafe()}}"><img src="{{get_serving_url(p.get().blobKey,size=100)}}" width="98%" id="temp1" alt="photo"></a>
          <br>
          
          <div class="button-container post-action padding_top padding_bottom">
                  <p>{{p.get().likes}} <i class="fa fa-thumbs-o-up fa-1x"></i> | {{p.get().viewed}} <i class="fa fa-eye fa-1x"></i></p>
                 {%if me == user%}
                  <form method="post">
                    <input type="hidden" name="actionType" value="edit">
                    <input type="hidden" name="photoKey" value="{{p.get().key.urlsafe()}}">
                    <button class="btn btn-primary btn-xs" type="submit" title="Edit Image" value="Edit"><span class="glyphicon glyphicon-edit" style="color:white;"></span></button>
                  </form>
                  <form method="post">
                    <input type="hidden" name="actionType" value="delete_photo">
                    <input type="hidden" name="photoKey" value="{{p.get().key.urlsafe()}}">
                    <button class="btn btn-primary btn-xs" type="submit" title="Delete Image" value="Delete"><span class="glyphicon glyphicon-trash" style="color:white;"></span></button>
                  </form>
                  <form method="post">
                    <input type="hidden" name="actionType" value="download">
                    <input type="hidden" name="photoKey" value="{{p.get().key.urlsafe()}}">
                    <button class="btn btn-primary btn-xs" type="submit"title="Download Image"  value="Delete"><i class="fa fa-download fa-1x"></i></button>
                  </form>
                  {%else%}
                  <button class="btn btn-info btn-xs" id="after_photo_list_like_{{loop.index}}" type="submit" title="Like This Image"><a onclick="photo_list_like_button('{{p.get().key.urlsafe()}}', 'after_photo_list_like_{{loop.index}}');" href="javascript:void(0);"><i style="color:white;" class="fa fa-thumbs-up fa-1x"></i></a></button>
                  <button class="btn btn-primary btn-xs" id="after_photo_list_add_{{loop.index}}" type="submit" title="Like This Image"><a onclick="photo_list_add_button('{{p.get().key.urlsafe()}}', 'after_photo_list_add_{{loop.index}}');" href="javascript:void(0);"><i style="color:white;" class="fa fa-plus fa-1x"></i></a></button>
                  {%endif%}
                </div>
                <hr>
        {%endif%}
        {% endfor %}
        </div>
        <div class="row col-md-3 col-sm-4 col-xs-12" style="margin:0px;">
        {%for p in portfolio.photos%}
        {%if loop.index % 4 == 3%}
                <a href="/photo/{{p.get().key.urlsafe()}}"><img src="{{get_serving_url(p.get().blobKey,size=100)}}" width="98%" id="temp1" alt="photo"></a>
          <br>
          
          <div class="button-container post-action padding_top padding_bottom">
                  <p>{{p.get().likes}} <i class="fa fa-thumbs-o-up fa-1x"></i> | {{p.get().viewed}} <i class="fa fa-eye fa-1x"></i></p>
                 {%if me == user%}
                  <form method="post">
                    <input type="hidden" name="actionType" value="edit">
                    <input type="hidden" name="photoKey" value="{{p.get().key.urlsafe()}}">
                    <button class="btn btn-primary btn-xs" type="submit" title="Edit Image" value="Edit"><span class="glyphicon glyphicon-edit" style="color:white;"></span></button>
                  </form>
                  <form method="post">
                    <input type="hidden" name="actionType" value="delete_photo">
                    <input type="hidden" name="photoKey" value="{{p.get().key.urlsafe()}}">
                    <button class="btn btn-primary btn-xs" type="submit" title="Delete Image" value="Delete"><span class="glyphicon glyphicon-trash" style="color:white;"></span></button>
                  </form>
                  <form method="post">
                    <input type="hidden" name="actionType" value="download">
                    <input type="hidden" name="photoKey" value="{{p.get().key.urlsafe()}}">
                    <button class="btn btn-primary btn-xs" type="submit"title="Download Image"  value="Delete"><i class="fa fa-download fa-1x"></i></button>
                  </form>
                  {%else%}
                  <button class="btn btn-info btn-xs" id="after_photo_list_like_{{loop.index}}" type="submit" title="Like This Image"><a onclick="photo_list_like_button('{{p.get().key.urlsafe()}}', 'after_photo_list_like_{{loop.index}}');" href="javascript:void(0);"><i style="color:white;" class="fa fa-thumbs-up fa-1x"></i></a></button>
                  <button class="btn btn-primary btn-xs" id="after_photo_list_add_{{loop.index}}" type="submit" title="Like This Image"><a onclick="photo_list_add_button('{{p.get().key.urlsafe()}}', 'after_photo_list_add_{{loop.index}}');" href="javascript:void(0);"><i style="color:white;" class="fa fa-plus fa-1x"></i></a></button>
                  {%endif%}
                </div>
                <hr>
        {%endif%}
        {% endfor %}
        </div>
        <div class="row col-md-3 col-sm-4 col-xs-12" style="margin:0px;">
        {%for p in portfolio.photos%}
        {%if loop.index % 4 == 0%}
                <a href="/photo/{{p.get().key.urlsafe()}}"><img src="{{get_serving_url(p.get().blobKey,size=100)}}" width="98%" id="temp1" alt="photo"></a>
          <br>
          
          <div class="button-container post-action padding_top padding_bottom">
                  <p>{{p.get().likes}} <i class="fa fa-thumbs-o-up fa-1x"></i> | {{p.get().viewed}} <i class="fa fa-eye fa-1x"></i></p>
                 {%if me == user%}
                  <form method="post">
                    <input type="hidden" name="actionType" value="edit">
                    <input type="hidden" name="photoKey" value="{{p.get().key.urlsafe()}}">
                    <button class="btn btn-primary btn-xs" type="submit" title="Edit Image" value="Edit"><span class="glyphicon glyphicon-edit" style="color:white;"></span></button>
                  </form>
                  <form method="post">
                    <input type="hidden" name="actionType" value="delete_photo">
                    <input type="hidden" name="photoKey" value="{{p.get().key.urlsafe()}}">
                    <button class="btn btn-primary btn-xs" type="submit" title="Delete Image" value="Delete"><span class="glyphicon glyphicon-trash" style="color:white;"></span></button>
                  </form>
                  <form method="post">
                    <input type="hidden" name="actionType" value="download">
                    <input type="hidden" name="photoKey" value="{{p.get().key.urlsafe()}}">
                    <button class="btn btn-primary btn-xs" type="submit"title="Download Image"  value="Delete"><i class="fa fa-download fa-1x"></i></button>
                  </form>
                  {%else%}
                  <button class="btn btn-info btn-xs" id="after_photo_list_like_{{loop.index}}" type="submit" title="Like This Image"><a onclick="photo_list_like_button('{{p.get().key.urlsafe()}}', 'after_photo_list_like_{{loop.index}}');" href="javascript:void(0);"><i style="color:white;" class="fa fa-thumbs-up fa-1x"></i></a></button>
                  <button class="btn btn-primary btn-xs" id="after_photo_list_add_{{loop.index}}" type="submit" title="Like This Image"><a onclick="photo_list_add_button('{{p.get().key.urlsafe()}}', 'after_photo_list_add_{{loop.index}}');" href="javascript:void(0);"><i style="color:white;" class="fa fa-plus fa-1x"></i></a></button>
                  {%endif%}
                </div>
                <hr>
        {%endif%}
        {% endfor %}
        </div>
        {%endif%}
    </div>
    </div>
  </div>
 <hr>
  <div class="modal fade bs-example-modal-lg" id="add_image" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
          <h4 class="modal-title">Select and Add Photo</h4>
        </div>
        <form method="post">
              <div class="col-md-12 col-sm-12 col-xs-12" id="photo_select">
                <div class="">
                      {%for p in photos%}
                        <div class="col-md-3">
                          <a href="javascript:void(0);"><img onclick="change_border_insert_input(this, '{{p.key.urlsafe()}}');" src="{{get_serving_url(p.blobKey)}}" height="100px" alt="photo"></a>
                          </div>
                      {%endfor%}
                </div><br>
                
                  <input type="hidden" id="" name="actionType" value="add_photos">
                  <div class="selected_photos"></div>
                  <div class="unselected_photos"></div>
               
              </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-xs btn-primary">Select and Close</button>
        </div>
         </form>
      </div>
    </div>
  </div>
    <div class="col-md-12 text-center">
        <p>Ads</p>
        <img src="/images/img_2.jpg" height="250px" width="300px">
        <img src="/images/img_2.jpg" height="250px" width="300px">
        <img src="/images/img_2.jpg" height="250px" width="300px">
    </div>
{%endblock%}

{%block javaScripts%}
<!-- JavaScript -->
<script src="https://maps.googleapis.com/maps/api/js"></script>
<script src="/js/jquery-1.10.2.js"></script>
<script src="/js/bootstrap.js"></script>
<script>
  function change_color_n_add_input(element, type) {
    
    if (element.style.color == "blue") {
        element.style.color = 'gray';
        document.getElementById(type).innerHTML = "<input type='hidden' name='photoTypeDelete' value='"+type+"'>";
    } else {
      element.style.color = 'blue';
      document.getElementById(type).innerHTML = "<input type='hidden' name='photoType' value='"+type+"'>";
    }
  }
</script>
<script type="text/javascript">
  function change_border_insert_input(element, photo_key) {
    
    if (element.style.border == "") {
        element.style.border = '3px solid blue';
        $( ".selected_photos" ).append( "<input type='hidden' name='photoSelect' value='"+photo_key+"'>" );
        //document.getElementById('selected_photos').innerHTML = "<input type='hidden' name='photoSelect' value='"+photo_key+"'>";
    } else if (element.style.border == "3px solid blue") {
      element.style.border = "";
      $( ".unselected_photos" ).append( "<input type='hidden' name='photoSelectDelete' value='"+photo_key+"'>" );
      //document.getElementById('unselected_photos').innerHTML = "<input type='hidden' name='photoSelectDelete' value='"+photo_key+"'>";
    }
  }
</script>
<script>
  function change_color_n_add_input_awards(element, type) {
    
    if (element.style.color == "gold") {
        element.style.color = 'gray';
        document.getElementById(type).innerHTML = "<input type='hidden' name='photoAwardDelete' value='"+type+"'>";
    } else {
      element.style.color = 'gold';
      document.getElementById(type).innerHTML = "<input type='hidden' name='photoAward' value='"+type+"'>";
    }
  }
</script>
    <script>
      function initialize() {
        var map_canvas = document.getElementById('map_canvas');
        var myLatlng = new google.maps.LatLng(28.600822, 77.314625);
        var map_options = {
          center: myLatlng,
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        var map = new google.maps.Map(map_canvas, map_options)
        var marker = new google.maps.Marker({
            position: myLatlng,
            map: map,
            title: 'Hello World!'
        });
      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
<!-- Custom JavaScript for the Side Menu and Smooth Scrolling -->
<script>
  $("#menu-close").click(function(e) {
    e.preventDefault();
      $("#sidebar-wrapper").toggleClass("active");
  });
</script>
<script>
  $("#menu-toggle").click(function(e) {
    e.preventDefault();
    $("#sidebar-wrapper").toggleClass("active");
  });
</script>
<script>
  $(function() {
    $('a[href*=#]:not([href=#])').click(function() {
      if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') || location.hostname == this.hostname) {
        var target = $(this.hash);
        target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
        if (target.length) {
          $('html,body').animate({
            scrollTop: target.offset().top
          }, 1000);
          return false;
        }
      }
    });
  });
</script>
<script type='text/javascript' src='http://jqueryjs.googlecode.com/files/jquery-1.3.2.min.js'></script>
    <script>
      jQuery(document).ready(function() {
        var offset = 220;
        var duration = 1500;
        jQuery(window).scroll(function() {
          if (jQuery(this).scrollTop() > offset) {
            jQuery('.back-to-top').fadeIn(duration);
          } else {
            jQuery('.back-to-top').fadeOut(duration);
          }
        });
        jQuery('.back-to-top').click(function(event) {
          event.preventDefault();
          jQuery('html, body').animate({scrollTop: 0}, duration);
          return false;
        })
      });
    </script>
<script type="text/javascript">
function change_main_image(img_link, img_src) {
    //document.getElementById("main_img").innerHTML = "<img alt='' src='"+img_key+"' class='img_display'/>";
  document.getElementById("main_img").innerHTML = "<a href='"+img_link+"'><img alt='' src='"+img_src+"' class='img_display'/></a>";
} 
</script>
<script>
function f(){  
    //Check File API support

  //<label for="files">Select multiple files: </label>
  //<input id="files" type="file" multiple/>
  //<output id="result" />
    if(window.File && window.FileList && window.FileReader)
    {
        var filesInput = document.getElementById("myFile");
        filesInput.addEventListener("change", function(event){
            var files = event.target.files; //FileList object
            var output = document.getElementById("thumb_img");
            var num_files = files.length;
            var txt = "";
            var file_name_size = [];
            var file_name = [];
            var total_size = 0;
            for(var i = 0; i< files.length; i++)
            {
              txt = "";
                var file = files[i];
                if ('name' in files[i]) {
                    txt += "" + files[i].name + "<br>";
                }
                if ('size' in files[i]) {
                    //txt += "Size: " + file.size/1000000 + " Mbytes <br>";
                    txt += "Size: " + Math.ceil((files[i].size/1000000) * 100)/100 + " Mbytes <br>";
                }
                //Only pics
                file_name_size.push(txt);
                file_name.push(files[i].name)
                total_size = total_size + Math.ceil((files[i].size/1000000) * 100)/100;
                if(!file.type.match('image'))
                  continue;
                var picReader = new FileReader();
                var w = 0;
                picReader.addEventListener("load",function(event){
                  var picFile = event.target;
                    var div = document.createElement("div");
                    div.innerHTML = "<br><div class='col-xs-3'><img class='profile-img' src='" + picFile.result + "' height='100px' alt='"+file_name[w]+"'><h4 style='color:black;'>"+file_name_size[w]+"</h4><h5 class='form-signin-heading padding_bottom'>Update Photo Details</h5><input type='text' id='picCaption' name='caption' class='form-control padding_bottom' placeholder='Caption' value="+file_name[w]+" autofocus><input type='text' id='picLocation' name='location' class='form-control padding_bottom' placeholder='Location' autofocus><textarea type='textarea' id='picDescription' name='description' class='form-control padding_bottom' placeholder='Description'></textarea></div>";
                    w++;
                    output.insertBefore(div,null);            
                });
                 //Read the image
                picReader.readAsDataURL(file);
            }    
            document.getElementById("num_photos").innerHTML = "Uploaded 0/"+num_files+" Photos, Total Size = "+total_size+"Mbytes";                         
        });
    }
    else
    {
        console.log("Your browser does not support File API");
    }
}

function f1(){  
    //Check File API support

  //<label for="files">Select multiple files: </label>
  //<input id="files" type="file" multiple/>
  //<output id="result" />
    if(window.File && window.FileList && window.FileReader)
    {
        var filesInput = document.getElementById("myFile1");
        filesInput.addEventListener("change", function(event){
            var files = event.target.files; //FileList object
            var output = document.getElementById("thumb_img1");
            var num_files = files.length;
            var txt = "";
            var file_name_size = [];
            var file_name = [];
            var total_size = 0;
            for(var i = 0; i< files.length; i++)
            {
              txt = "";
                var file = files[i];
                if ('name' in files[i]) {
                    txt += "" + files[i].name + "<br>";
                }
                if ('size' in files[i]) {
                    //txt += "Size: " + file.size/1000000 + " Mbytes <br>";
                    txt += "Size: " + Math.ceil((files[i].size/1000000) * 100)/100 + " Mbytes <br>";
                }
                //Only pics
                file_name_size.push(txt);
                file_name.push(files[i].name)
                total_size = total_size + Math.ceil((files[i].size/1000000) * 100)/100;
                if(!file.type.match('image'))
                  continue;
                var picReader = new FileReader();
                var w = 0;
                picReader.addEventListener("load",function(event){
                  var picFile = event.target;
                    var div = document.createElement("div");
                    div.innerHTML = "<br><div class='col-xs-3'><img class='img-rounded' src='" + picFile.result + "' height='100px' alt='"+file_name[w]+"'><h4 style='color:black;'>"+file_name_size[w]+"</h4><h5 class='form-signin-heading padding_bottom'>Update Photo Details</h5><input type='text' id='picCaption' name='caption' class='form-control padding_bottom' placeholder='Caption' value="+file_name[w]+" autofocus><input type='text' id='picLocation' name='location' class='form-control padding_bottom' placeholder='Location' autofocus><textarea type='textarea' id='picDescription' name='description' class='form-control padding_bottom' placeholder='Description'></textarea></div>";
                    w++;
                    output.insertBefore(div,null);            
                });
                 //Read the image
                picReader.readAsDataURL(file);
            }    
            document.getElementById("num_photos").innerHTML = "Uploaded 0/"+num_files+" Photos, Total Size = "+total_size+"Mbytes";                         
        });
    }
    else
    {
        console.log("Your browser does not support File API");
    }
}

function f2(){  
    //Check File API support

  //<label for="files">Select multiple files: </label>
  //<input id="files" type="file" multiple/>
  //<output id="result" />
    if(window.File && window.FileList && window.FileReader)
    {
        var filesInput = document.getElementById("myFile2");
        filesInput.addEventListener("change", function(event){
            var files = event.target.files; //FileList object
            var output = document.getElementById("thumb_img2");
            var num_files = files.length;
            var txt = "";
            var file_name_size = [];
            var file_name = [];
            var total_size = 0;
            for(var i = 0; i< files.length; i++)
            {
              txt = "";
                var file = files[i];
                if ('name' in files[i]) {
                    txt += "" + files[i].name + "<br>";
                }
                if ('size' in files[i]) {
                    //txt += "Size: " + file.size/1000000 + " Mbytes <br>";
                    txt += "Size: " + Math.ceil((files[i].size/1000000) * 100)/100 + " Mbytes <br>";
                }
                //Only pics
                file_name_size.push(txt);
                file_name.push(files[i].name)
                total_size = total_size + Math.ceil((files[i].size/1000000) * 100)/100;
                if(!file.type.match('image'))
                  continue;
                var picReader = new FileReader();
                var w = 0;
                picReader.addEventListener("load",function(event){
                  var picFile = event.target;
                    var div = document.createElement("div");
                    div.innerHTML = "<br><div class='col-xs-3'><img class='img-rounded' src='" + picFile.result + "' height='100px' alt='"+file_name[w]+"'><h4 style='color:black;'>"+file_name_size[w]+"</h4><h5 class='form-signin-heading padding_bottom'>Update Photo Details</h5><input type='text' id='picCaption' name='caption' class='form-control padding_bottom' placeholder='Caption' value="+file_name[w]+" autofocus><input type='text' id='picLocation' name='location' class='form-control padding_bottom' placeholder='Location' autofocus><textarea type='textarea' id='picDescription' name='description' class='form-control padding_bottom' placeholder='Description'></textarea></div>";
                    w++;
                    output.insertBefore(div,null);            
                });
                 //Read the image
                picReader.readAsDataURL(file);
            }    
            document.getElementById("num_photos").innerHTML = "Uploaded 0/"+num_files+" Photos, Total Size = "+total_size+"Mbytes";                         
        });
    }
    else
    {
        console.log("Your browser does not support File API");
    }
}

function f3(){  
    //Check File API support

  //<label for="files">Select multiple files: </label>
  //<input id="files" type="file" multiple/>
  //<output id="result" />
    if(window.File && window.FileList && window.FileReader)
    {
        var filesInput = document.getElementById("myFile3");
        filesInput.addEventListener("change", function(event){
            var files = event.target.files; //FileList object
            var output = document.getElementById("thumb_img3");
            var num_files = files.length;
            var txt = "";
            var file_name_size = [];
            var file_name = [];
            var total_size = 0;
            for(var i = 0; i< files.length; i++)
            {
              txt = "";
                var file = files[i];
                if ('name' in files[i]) {
                    txt += "" + files[i].name + "<br>";
                }
                if ('size' in files[i]) {
                    //txt += "Size: " + file.size/1000000 + " Mbytes <br>";
                    txt += "Size: " + Math.ceil((files[i].size/1000000) * 100)/100 + " Mbytes <br>";
                }
                //Only pics
                file_name_size.push(txt);
                file_name.push(files[i].name)
                total_size = total_size + Math.ceil((files[i].size/1000000) * 100)/100;
                if(!file.type.match('image'))
                  continue;
                var picReader = new FileReader();
                var w = 0;
                picReader.addEventListener("load",function(event){
                  var picFile = event.target;
                    var div = document.createElement("div");
                    div.innerHTML = "<br><div class='col-xs-3'><img class='img-rounded' src='" + picFile.result + "' height='100px' alt='"+file_name[w]+"'><h4 style='color:black;'>"+file_name_size[w]+"</h4><h5 class='form-signin-heading padding_bottom'>Update Photo Details</h5><input type='text' id='picCaption' name='caption' class='form-control padding_bottom' placeholder='Caption' value="+file_name[w]+" autofocus><input type='text' id='picLocation' name='location' class='form-control padding_bottom' placeholder='Location' autofocus><textarea type='textarea' id='picDescription' name='description' class='form-control padding_bottom' placeholder='Description'></textarea></div>";
                    w++;
                    output.insertBefore(div,null);            
                });
                 //Read the image
                picReader.readAsDataURL(file);
            }    
            document.getElementById("num_photos").innerHTML = "Uploaded 0/"+num_files+" Photos, Total Size = "+total_size+"Mbytes";                         
        });
    }
    else
    {
        console.log("Your browser does not support File API");
    }
}

function start() {
  f();
  f1();
  f2();
  f3();
  var height = document.documentElement.clientHeight;
    window.scrollBy(0, Math.floor(0.6 * height));
}
window.onload = start;
</script>
{%endblock%}=[]